<% content_for :page_actions do %>
  <% if can?(:create, Spree::Product) %>
    <%= button_link_to Spree.t(:new_product), new_object_url, { class: "btn-success", icon: 'add', id: 'admin_new_product' } %>
  <% end %>
  <%= render partial: 'spree/admin/shared/help', locals: {title_help: t(:admin_help_products_edit_title), body_help: t(:admin_help_products_edit_body)} %>
<% end %>

<%= render partial: 'spree/admin/shared/product_tabs', locals: {current: :specific_attributes} %>
<%= render partial: 'spree/admin/shared/error_messages', locals: { target: @product } %>

<h3>Atributos Miele</h3>

<% if @product.specific_attribute %>
  <table class="table">
    <thead>
      <tr>
        <th>Atributo</th>
        <th>Valor</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr id="attribute-mandatory">
        <td>Mandatorio</td>
        <td>
          <%= @product.specific_attribute.mandatory ? 'Si' : 'No' %>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'mandatory', 'boolean'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr>
        <td>Canal</td>
        <td>
          <%= @product.specific_attribute.channel %>
        </td>
        <td></td>
      </tr>
      <tr id="attribute-can_retire">
        <td>Retirable</td>
        <td>
          <%= @product.specific_attribute.can_retire ? 'Si' : 'No' %>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'can_retire', 'boolean'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-can_ship">
        <td>Despachable</td>
        <td>
          <%= @product.specific_attribute.can_ship ? 'Si' : 'No' %>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'can_ship', 'boolean'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-category">
        <td>Tipo</td>
        <td>
          <%= @product.specific_attribute.category %>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'category', 'string'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-built_in">
        <td>Built-in</td>
        <td>
          <%= @product.specific_attribute.built_in ? 'Si' : 'No' %>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'built_in', 'boolean'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-instalation">
        <td>Instalación</td>
        <td>
          <%= @product.specific_attribute.instalation ? 'Si' : 'No' %>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'instalation', 'boolean'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-outlet">
        <td>Outlet</td>
        <td>
          <%= @product.specific_attribute.outlet ? 'Si' : 'No' %>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'outlet', 'boolean'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-specs">
        <td>Especificaciones</td>
        <td>
          <span id="value-specs"><%= @product.specific_attribute.specs.html_safe if @product.specific_attribute.specs %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'specs', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-features">
        <td>Características</td>
        <td>
          <span id="value-features"><%= @product.specific_attribute.features.html_safe if @product.specific_attribute.features %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'features', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-technical_specs">
        <td>Especificaciones técnicas</td>
        <td>
          <span id="value-technical_specs"><%= @product.specific_attribute.technical_specs.html_safe if @product.specific_attribute.technical_specs %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'technical_specs', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-product_functions">
        <td>Funciones</td>
        <td>
          <span id="value-product_functions"><%= @product.specific_attribute.product_functions.html_safe if @product.specific_attribute.product_functions %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'product_functions', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-drink">
        <td>Especialidades de bebidas</td>
        <td>
          <span id="value-drink"><%= @product.specific_attribute.drink.html_safe if @product.specific_attribute.drink %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'drink', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-basket_design">
        <td>Diseño de los cestos</td>
        <td>
          <span id="value-basket_design"><%= @product.specific_attribute.basket_design.html_safe if @product.specific_attribute.basket_design %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'basket_design', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-wash_program">
        <td>Programa de lavado</td>
        <td>
          <span id="value-wash_program"><%= @product.specific_attribute.wash_program.html_safe if @product.specific_attribute.wash_program %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'wash_program', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-dry_program">
        <td>Programa de secado</td>
        <td>
          <span id="value-dry_program"><%= @product.specific_attribute.dry_program.html_safe if @product.specific_attribute.dry_program %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'dry_program', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-care">
        <td>Cuidado y mantenimiento</td>
        <td>
          <span id="value-care"><%= @product.specific_attribute.care.html_safe if @product.specific_attribute.care %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'care', 'text'), 
               class: 'btn btn-primary btn-sm edit-specific-attribute',
               remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-security">
        <td>Seguridad</td>
        <td>
          <span id="value-security"><%= @product.specific_attribute.security.html_safe if @product.specific_attribute.security %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'security', 'text'), 
              class: 'btn btn-primary btn-sm edit-specific-attribute',
              remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-sustain">
        <td>Eficiencia y sostenibilidad</td>
        <td>
          <span id="value-sustain"><%= @product.specific_attribute.sustain.html_safe if @product.specific_attribute.sustain %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'sustain', 'text'), 
              class: 'btn btn-primary btn-sm edit-specific-attribute',
              remote: true do %>
            <span class="icon icon-edit"></span>
          <% end %>
        </td>
      </tr>
      <tr id="attribute-accessories">
        <td>Accesorios y suministros</td>
        <td>
          <span id="value-accessories"><%= @product.specific_attribute.accessories.html_safe if @product.specific_attribute.accessories %></span>
        </td>
        <td>
          <%= link_to admin_edit_product_specific_attribute_path(@product, @product.specific_attribute, 'accessories', 'text'), 
              class: 'btn btn-primary btn-sm edit-specific-attribute',
              remote: true do %>
            <span class="icon icon-edit"></span>
         <% end %>
        </td>
      </tr>
    </tbody>
  </table>
<% else %>
  <div class="alert alert-info no-objects-found">
    Este producto no tiene atributos Miele
  </div>
<% end %>
<!-- 
<script>
  $(document).ready(function(){
    $(".edit-specific-attribute").click(function(){
      $("#edit-attribute-"+$(this).data('value')).removeClass("hidden");
      $("#value-"+$(this).data('value')).addClass("hidden");
      $(this).addClass("hidden");
    });
      tinymce.init({
        selector: '.edit-specific-attribute-input'
      });
  })
</script> -->